{"ast":null,"code":"var _jsxFileName = \"C:\\\\repos\\\\Emergent-Video-Splitter-V2\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport { Amplify } from 'aws-amplify';\nimport { AuthProvider, useAuth } from './AuthContext';\nimport Login from './components/Login';\nimport Header from './components/Header';\nimport ProtectedRoute from './components/ProtectedRoute';\n\n// AWS Configuration\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst awsConfig = {\n  API: {\n    endpoints: [{\n      name: 'videoapi',\n      endpoint: process.env.REACT_APP_API_GATEWAY_URL || 'https://your-api-gateway-url/prod',\n      region: 'us-east-1'\n    }]\n  },\n  Storage: {\n    AWSS3: {\n      bucket: process.env.REACT_APP_S3_BUCKET || 'videosplitter-storage-1751560247',\n      region: 'us-east-1'\n    }\n  }\n};\nAmplify.configure(awsConfig);\n\n// Main App Component with Authentication\nfunction AppContent() {\n  _s();\n  const {\n    isAuthenticated,\n    isLoading,\n    getAuthHeader\n  } = useAuth();\n\n  // Use API Gateway URL if available, otherwise fallback to current backend\n  const BACKEND_URL = process.env.REACT_APP_API_GATEWAY_URL || process.env.REACT_APP_BACKEND_URL;\n  const API = `${BACKEND_URL}/api`;\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [jobId, setJobId] = useState(null);\n  const [videoInfo, setVideoInfo] = useState(null);\n  const [splitConfig, setSplitConfig] = useState({\n    method: 'time_based',\n    time_points: [],\n    interval_duration: 300,\n    // 5 minutes\n    preserve_quality: true,\n    output_format: 'mp4',\n    subtitle_sync_offset: 0,\n    force_keyframes: true,\n    keyframe_interval: 2.0\n  });\n  const [processing, setProcessing] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [splits, setSplits] = useState([]);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [manualTimeInput, setManualTimeInput] = useState('');\n  const [isAWSMode, setIsAWSMode] = useState(false);\n  const videoRef = useRef(null);\n  const fileInputRef = useRef(null);\n\n  // Detect if we're running in AWS mode\n  useEffect(() => {\n    const awsMode = process.env.REACT_APP_API_GATEWAY_URL || process.env.REACT_APP_S3_BUCKET;\n    setIsAWSMode(!!awsMode);\n    if (awsMode) {\n      console.log('ðŸš€ Running in AWS Amplify mode');\n      console.log('API Gateway:', process.env.REACT_APP_API_GATEWAY_URL);\n      console.log('S3 Bucket:', process.env.REACT_APP_S3_BUCKET);\n    } else {\n      console.log('ðŸ–¥ï¸ Running in local development mode');\n    }\n  }, []);\n\n  // Clear any stale state on component mount\n  useEffect(() => {\n    setJobId(null);\n    setVideoInfo(null);\n    setSplits([]);\n    setProgress(0);\n    setSelectedFile(null);\n  }, []);\n\n  // Set video source when jobId changes\n  useEffect(() => {\n    if (jobId && !jobId.includes('mock')) {\n      const setVideoSource = () => {\n        if (videoRef.current) {\n          const timestamp = Date.now();\n          const videoUrl = `${API}/video-stream/${jobId}?t=${timestamp}`;\n          console.log('Setting video src to:', videoUrl);\n          videoRef.current.src = videoUrl;\n          videoRef.current.load();\n        } else {\n          setTimeout(setVideoSource, 100);\n        }\n      };\n      setVideoSource();\n    }\n  }, [jobId, API]);\n\n  // Show loading screen while checking authentication\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-8 text-center border border-white/20\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white text-lg\",\n          children: \"Loading Video Splitter Pro...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Show login if not authenticated\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Main authenticated app content\n  return /*#__PURE__*/_jsxDEV(AuthenticatedApp, {\n    BACKEND_URL: BACKEND_URL,\n    API: API,\n    isAWSMode: isAWSMode,\n    getAuthHeader: getAuthHeader\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 10\n  }, this);\n}\n\n// Separate component for authenticated app to avoid hooks issues\n_s(AppContent, \"bNuQD3kl+NHGskg6lD+uHwPS6b8=\", false, function () {\n  return [useAuth];\n});\n_c = AppContent;\nfunction AuthenticatedApp({\n  BACKEND_URL,\n  API,\n  isAWSMode,\n  getAuthHeader\n}) {\n  _s2();\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [jobId, setJobId] = useState(null);\n  const [videoInfo, setVideoInfo] = useState(null);\n  const [splitConfig, setSplitConfig] = useState({\n    method: 'time_based',\n    time_points: [],\n    interval_duration: 300,\n    // 5 minutes\n    preserve_quality: true,\n    output_format: 'mp4',\n    subtitle_sync_offset: 0,\n    force_keyframes: true,\n    keyframe_interval: 2.0\n  });\n  const [processing, setProcessing] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [splits, setSplits] = useState([]);\n  const [currentTime, setCurrentTime] = useState(0);\n  const [manualTimeInput, setManualTimeInput] = useState('');\n  const videoRef = useRef(null);\n  const fileInputRef = useRef(null);\n\n  // Clear any stale state on component mount\n  useEffect(() => {\n    setJobId(null);\n    setVideoInfo(null);\n    setSplits([]);\n    setProgress(0);\n    setSelectedFile(null);\n  }, []);\n\n  // Set video source when jobId changes\n  useEffect(() => {\n    if (jobId && !jobId.includes('mock')) {\n      const setVideoSource = () => {\n        if (videoRef.current) {\n          const timestamp = Date.now();\n          const videoUrl = `${API}/video-stream/${jobId}?t=${timestamp}`;\n          console.log('Setting video src to:', videoUrl);\n          videoRef.current.src = videoUrl;\n          videoRef.current.load();\n        } else {\n          setTimeout(setVideoSource, 100);\n        }\n      };\n      setVideoSource();\n    }\n  }, [jobId, API]);\n\n  // Format file size for display\n  const formatFileSize = bytes => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  };\n\n  // Format time for display\n  const formatTime = seconds => {\n    const hrs = Math.floor(seconds / 3600);\n    const mins = Math.floor(seconds % 3600 / 60);\n    const secs = Math.floor(seconds % 60);\n    if (hrs > 0) {\n      return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n    }\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // Parse time input (MM:SS or HH:MM:SS)\n  const parseTime = timeStr => {\n    const parts = timeStr.split(':').map(p => parseInt(p));\n    if (parts.length === 2) {\n      return parts[0] * 60 + parts[1];\n    } else if (parts.length === 3) {\n      return parts[0] * 3600 + parts[1] * 60 + parts[2];\n    }\n    return 0;\n  };\n\n  // Handle file selection\n  const handleFileSelect = event => {\n    const file = event.target.files[0];\n    if (file) {\n      setSelectedFile(file);\n      setJobId(null);\n      setVideoInfo(null);\n      setSplits([]);\n      setProgress(0);\n      setSplitConfig({\n        ...splitConfig,\n        time_points: []\n      });\n      if (videoRef.current) {\n        videoRef.current.src = '';\n        videoRef.current.load();\n      }\n    }\n  };\n\n  // Upload video (AWS mode vs Local mode) - Now with authentication\n  const uploadVideo = async () => {\n    if (!selectedFile) return;\n    try {\n      setUploadProgress(0);\n      if (isAWSMode) {\n        // AWS mode: Use presigned URL upload with authentication\n        console.log('ðŸš€ Uploading to AWS S3...');\n\n        // Get presigned URL from API Gateway with auth headers\n        const response = await axios.post(`${API}/upload-video`, {\n          filename: selectedFile.name,\n          fileType: selectedFile.type,\n          fileSize: selectedFile.size\n        }, {\n          headers: getAuthHeader()\n        });\n        const {\n          upload_url,\n          job_id\n        } = response.data;\n\n        // Upload directly to S3 using presigned URL\n        await axios.put(upload_url, selectedFile, {\n          headers: {\n            'Content-Type': selectedFile.type\n          },\n          onUploadProgress: progressEvent => {\n            const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n            setUploadProgress(percentCompleted);\n          }\n        });\n        setJobId(job_id);\n        setVideoInfo({\n          duration: 120,\n          // Placeholder - would be extracted by Lambda\n          format: 'mp4',\n          size: selectedFile.size,\n          video_streams: [],\n          audio_streams: [],\n          subtitle_streams: [],\n          chapters: []\n        });\n      } else {\n        // Local mode: Direct upload to FastAPI with authentication\n        const formData = new FormData();\n        formData.append('file', selectedFile);\n        const response = await axios.post(`${API}/upload-video`, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n            ...getAuthHeader()\n          },\n          onUploadProgress: progressEvent => {\n            const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n            setUploadProgress(percentCompleted);\n          }\n        });\n        setJobId(response.data.job_id);\n        setVideoInfo(response.data.video_info);\n      }\n    } catch (error) {\n      var _error$response, _error$response2, _error$response3, _error$response3$data;\n      console.error('Upload failed:', error);\n      let errorMessage = 'Upload failed';\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n        errorMessage = 'Authentication required. Please log in again.';\n      } else if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 403) {\n        errorMessage = 'Access denied. You do not have permission to upload files.';\n      } else if ((_error$response3 = error.response) !== null && _error$response3 !== void 0 && (_error$response3$data = _error$response3.data) !== null && _error$response3$data !== void 0 && _error$response3$data.detail) {\n        errorMessage = error.response.data.detail;\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      alert(errorMessage);\n    }\n  };\n\n  // Add split point\n  const addSplitPoint = (time = null) => {\n    const splitTime = time !== null ? time : currentTime;\n    if (splitConfig.method === 'time_based') {\n      const newPoints = [...splitConfig.time_points, splitTime].sort((a, b) => a - b);\n      setSplitConfig({\n        ...splitConfig,\n        time_points: newPoints\n      });\n    }\n  };\n\n  // Add manual time point\n  const addManualTime = () => {\n    if (manualTimeInput) {\n      const time = parseTime(manualTimeInput);\n      if (time > 0 && videoInfo && time < videoInfo.duration) {\n        addSplitPoint(time);\n        setManualTimeInput('');\n      } else {\n        alert('Invalid time format or time exceeds video duration');\n      }\n    }\n  };\n\n  // Remove split point\n  const removeSplitPoint = index => {\n    const newPoints = splitConfig.time_points.filter((_, i) => i !== index);\n    setSplitConfig({\n      ...splitConfig,\n      time_points: newPoints\n    });\n  };\n\n  // Start splitting - Now with authentication\n  const startSplitting = async () => {\n    if (!jobId) return;\n    try {\n      setProcessing(true);\n      setProgress(0);\n      await axios.post(`${API}/split-video/${jobId}`, splitConfig, {\n        headers: getAuthHeader()\n      });\n\n      // Poll for progress\n      const pollProgress = setInterval(async () => {\n        try {\n          const response = await axios.get(`${API}/job-status/${jobId}`, {\n            headers: getAuthHeader()\n          });\n          const job = response.data;\n          setProgress(job.progress);\n          if (job.status === 'completed') {\n            setSplits(job.splits);\n            setProcessing(false);\n            clearInterval(pollProgress);\n          } else if (job.status === 'failed') {\n            alert('Processing failed: ' + job.error_message);\n            setProcessing(false);\n            clearInterval(pollProgress);\n          }\n        } catch (error) {\n          var _error$response4, _error$response5;\n          console.error('Progress poll error:', error);\n          if (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 401 || ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.status) === 403) {\n            alert('Authentication expired. Please log in again.');\n            setProcessing(false);\n            clearInterval(pollProgress);\n          }\n        }\n      }, 2000);\n    } catch (error) {\n      var _error$response6, _error$response7, _error$response8, _error$response8$data;\n      console.error('Split failed:', error);\n      let errorMessage = 'Split failed';\n      if (((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.status) === 401) {\n        errorMessage = 'Authentication required. Please log in again.';\n      } else if (((_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : _error$response7.status) === 403) {\n        errorMessage = 'Access denied. You do not have permission to process videos.';\n      } else if ((_error$response8 = error.response) !== null && _error$response8 !== void 0 && (_error$response8$data = _error$response8.data) !== null && _error$response8$data !== void 0 && _error$response8$data.detail) {\n        errorMessage = error.response.data.detail;\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      alert(errorMessage);\n      setProcessing(false);\n    }\n  };\n\n  // Download split file - Now with authentication\n  const downloadSplit = filename => {\n    const authHeader = getAuthHeader();\n    const downloadUrl = `${API}/download/${jobId}/${filename}`;\n\n    // Create a temporary link with auth headers (for newer browsers)\n    if (authHeader.Authorization) {\n      fetch(downloadUrl, {\n        headers: authHeader\n      }).then(response => response.blob()).then(blob => {\n        const url = window.URL.createObjectURL(blob);\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = filename;\n        document.body.appendChild(link);\n        link.click();\n        window.URL.revokeObjectURL(url);\n        document.body.removeChild(link);\n      }).catch(error => {\n        console.error('Download failed:', error);\n        alert('Download failed. Please try again or check your authentication.');\n      });\n    } else {\n      // Fallback for direct link (if no auth needed)\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n  };\n\n  // Update current time from video\n  const handleTimeUpdate = () => {\n    if (videoRef.current) {\n      setCurrentTime(videoRef.current.currentTime);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mx-auto px-4 py-8\",\n        children: [/*#__PURE__*/_jsxDEV(Header, {\n          isAWSMode: isAWSMode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-8 mb-8 border border-white/20\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-white mb-6\",\n            children: \"Upload Video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            ref: fileInputRef,\n            type: \"file\",\n            accept: \"video/*,.mkv,.mp4,.avi,.mov,.wmv,.flv,.webm\",\n            onChange: handleFileSelect,\n            className: \"hidden\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _fileInputRef$current;\n                return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n              },\n              className: \"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold py-4 px-8 rounded-xl transition-all duration-300 transform hover:scale-105\",\n              children: selectedFile ? `Selected: ${selectedFile.name}` : 'Choose Video File'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 15\n            }, this), selectedFile && !jobId && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: uploadVideo,\n              className: \"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300\",\n              children: isAWSMode ? 'Upload to AWS S3' : 'Upload Video'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this), uploadProgress > 0 && uploadProgress < 100 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full bg-gray-700 rounded-full h-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full transition-all duration-300\",\n                style: {\n                  width: `${uploadProgress}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }, this), (videoInfo || jobId) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-8 mb-8 border border-white/20\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-white mb-6\",\n            children: \"Video Preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid lg:grid-cols-2 gap-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"video\", {\n                ref: videoRef,\n                controls: true,\n                onTimeUpdate: handleTimeUpdate,\n                className: \"w-full rounded-xl shadow-2xl\",\n                preload: \"metadata\",\n                crossOrigin: \"anonymous\",\n                children: \"Your browser does not support the video tag.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 text-white\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Current Time:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 510,\n                    columnNumber: 24\n                  }, this), \" \", formatTime(currentTime)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 510,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 17\n            }, this), videoInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-white space-y-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl font-bold\",\n                children: \"Video Information\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-black/30 rounded-lg p-4 space-y-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Duration:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 518,\n                    columnNumber: 26\n                  }, this), \" \", formatTime(videoInfo.duration)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Format:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 519,\n                    columnNumber: 26\n                  }, this), \" \", videoInfo.format]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 519,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Size:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 520,\n                    columnNumber: 26\n                  }, this), \" \", formatFileSize(videoInfo.size)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 520,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Video Streams:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 521,\n                    columnNumber: 26\n                  }, this), \" \", videoInfo.video_streams.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 521,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Audio Streams:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 522,\n                    columnNumber: 26\n                  }, this), \" \", videoInfo.audio_streams.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Subtitle Streams:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 523,\n                    columnNumber: 26\n                  }, this), \" \", videoInfo.subtitle_streams.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 523,\n                  columnNumber: 23\n                }, this), videoInfo.chapters.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Chapters:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 525,\n                    columnNumber: 28\n                  }, this), \" \", videoInfo.chapters.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 525,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 517,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 13\n        }, this), videoInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-8 mb-8 border border-white/20\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-white mb-6\",\n            children: \"Split Configuration\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid lg:grid-cols-2 gap-8\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-white font-bold mb-3\",\n                  children: \"Split Method\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 543,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: splitConfig.method,\n                  onChange: e => setSplitConfig({\n                    ...splitConfig,\n                    method: e.target.value\n                  }),\n                  className: \"w-full bg-black/30 text-white rounded-lg p-3 border border-white/20\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"time_based\",\n                    children: \"Time-based (Manual Points)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 549,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"intervals\",\n                    children: \"Equal Intervals\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 550,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"chapters\",\n                    children: \"Chapter-based\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 551,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 544,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 542,\n                columnNumber: 19\n              }, this), splitConfig.method === 'time_based' && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => addSplitPoint(),\n                    className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors\",\n                    children: [\"Add Current Time (\", formatTime(currentTime), \")\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 559,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    placeholder: \"MM:SS or HH:MM:SS\",\n                    value: manualTimeInput,\n                    onChange: e => setManualTimeInput(e.target.value),\n                    className: \"flex-1 bg-black/30 text-white rounded-lg p-2 border border-white/20\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 568,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: addManualTime,\n                    className: \"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors\",\n                    children: \"Add\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 575,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 567,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    className: \"text-white font-bold mb-2\",\n                    children: \"Split Points:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 584,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"space-y-2 max-h-32 overflow-y-auto\",\n                    children: splitConfig.time_points.map((time, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex justify-between items-center bg-black/30 rounded p-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-white\",\n                        children: formatTime(time)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 588,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => removeSplitPoint(index),\n                        className: \"text-red-400 hover:text-red-300\",\n                        children: \"Remove\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 589,\n                        columnNumber: 31\n                      }, this)]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 587,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 585,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 583,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 21\n              }, this), splitConfig.method === 'intervals' && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-white font-bold mb-2\",\n                  children: \"Interval Duration (seconds)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 605,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: splitConfig.interval_duration,\n                  onChange: e => setSplitConfig({\n                    ...splitConfig,\n                    interval_duration: parseFloat(e.target.value)\n                  }),\n                  className: \"w-full bg-black/30 text-white rounded-lg p-3 border border-white/20\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 606,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 604,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startSplitting,\n                disabled: processing || splitConfig.method === 'time_based' && splitConfig.time_points.length === 0,\n                className: \"w-full bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 disabled:from-gray-600 disabled:to-gray-700 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 disabled:cursor-not-allowed\",\n                children: processing ? 'Processing...' : 'Start Splitting'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 616,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 540,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 13\n        }, this), processing && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-8 mb-8 border border-white/20\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-white mb-6\",\n            children: \"Processing Progress\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full bg-gray-700 rounded-full h-4 mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gradient-to-r from-orange-500 to-red-500 h-4 rounded-full transition-all duration-300\",\n              style: {\n                width: `${progress}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 632,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-white text-center\",\n            children: [progress.toFixed(1), \"% Complete\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 13\n        }, this), splits.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-8 border border-white/20\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-white mb-6\",\n            children: \"Split Results\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 645,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid gap-4\",\n            children: splits.map((split, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center bg-black/30 rounded-lg p-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-white font-medium\",\n                children: [\"Part \", index + 1, \": \", split.file]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 649,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => downloadSplit(split.file),\n                className: \"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors\",\n                children: \"Download\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 650,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 648,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 646,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 644,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 445,\n    columnNumber: 5\n  }, this);\n}\n\n// Main App with AuthProvider\n_s2(AuthenticatedApp, \"C/iiQZsXUc5Nw1m01NyEV1UVX1E=\");\n_c2 = AuthenticatedApp;\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(AuthProvider, {\n    children: /*#__PURE__*/_jsxDEV(AppContent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 671,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 670,\n    columnNumber: 5\n  }, this);\n}\n_c3 = App;\nexport default App;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"AppContent\");\n$RefreshReg$(_c2, \"AuthenticatedApp\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","axios","Amplify","AuthProvider","useAuth","Login","Header","ProtectedRoute","jsxDEV","_jsxDEV","awsConfig","API","endpoints","name","endpoint","process","env","REACT_APP_API_GATEWAY_URL","region","Storage","AWSS3","bucket","REACT_APP_S3_BUCKET","configure","AppContent","_s","isAuthenticated","isLoading","getAuthHeader","BACKEND_URL","REACT_APP_BACKEND_URL","selectedFile","setSelectedFile","uploadProgress","setUploadProgress","jobId","setJobId","videoInfo","setVideoInfo","splitConfig","setSplitConfig","method","time_points","interval_duration","preserve_quality","output_format","subtitle_sync_offset","force_keyframes","keyframe_interval","processing","setProcessing","progress","setProgress","splits","setSplits","currentTime","setCurrentTime","manualTimeInput","setManualTimeInput","isAWSMode","setIsAWSMode","videoRef","fileInputRef","awsMode","console","log","includes","setVideoSource","current","timestamp","Date","now","videoUrl","src","load","setTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","AuthenticatedApp","_c","_s2","formatFileSize","bytes","k","sizes","i","Math","floor","parseFloat","pow","toFixed","formatTime","seconds","hrs","mins","secs","toString","padStart","parseTime","timeStr","parts","split","map","p","parseInt","length","handleFileSelect","event","file","target","files","uploadVideo","response","post","filename","fileType","type","fileSize","size","headers","upload_url","job_id","data","put","onUploadProgress","progressEvent","percentCompleted","round","loaded","total","duration","format","video_streams","audio_streams","subtitle_streams","chapters","formData","FormData","append","video_info","error","_error$response","_error$response2","_error$response3","_error$response3$data","errorMessage","status","detail","message","alert","addSplitPoint","time","splitTime","newPoints","sort","a","b","addManualTime","removeSplitPoint","index","filter","_","startSplitting","pollProgress","setInterval","get","job","clearInterval","error_message","_error$response4","_error$response5","_error$response6","_error$response7","_error$response8","_error$response8$data","downloadSplit","authHeader","downloadUrl","Authorization","fetch","then","blob","url","window","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","revokeObjectURL","removeChild","catch","handleTimeUpdate","ref","accept","onChange","onClick","_fileInputRef$current","style","width","controls","onTimeUpdate","preload","crossOrigin","value","e","placeholder","disabled","_c2","App","_c3","$RefreshReg$"],"sources":["C:/repos/Emergent-Video-Splitter-V2/frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport './App.css';\r\nimport axios from 'axios';\r\nimport { Amplify } from 'aws-amplify';\r\nimport { AuthProvider, useAuth } from './AuthContext';\r\nimport Login from './components/Login';\r\nimport Header from './components/Header';\r\nimport ProtectedRoute from './components/ProtectedRoute';\r\n\r\n// AWS Configuration\r\nconst awsConfig = {\r\n  API: {\r\n    endpoints: [\r\n      {\r\n        name: 'videoapi',\r\n        endpoint: process.env.REACT_APP_API_GATEWAY_URL || 'https://your-api-gateway-url/prod',\r\n        region: 'us-east-1'\r\n      }\r\n    ]\r\n  },\r\n  Storage: {\r\n    AWSS3: {\r\n      bucket: process.env.REACT_APP_S3_BUCKET || 'videosplitter-storage-1751560247',\r\n      region: 'us-east-1'\r\n    }\r\n  }\r\n};\r\n\r\nAmplify.configure(awsConfig);\r\n\r\n// Main App Component with Authentication\r\nfunction AppContent() {\r\n  const { isAuthenticated, isLoading, getAuthHeader } = useAuth();\r\n  \r\n  // Use API Gateway URL if available, otherwise fallback to current backend\r\n  const BACKEND_URL = process.env.REACT_APP_API_GATEWAY_URL || process.env.REACT_APP_BACKEND_URL;\r\n  const API = `${BACKEND_URL}/api`;\r\n\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [jobId, setJobId] = useState(null);\r\n  const [videoInfo, setVideoInfo] = useState(null);\r\n  const [splitConfig, setSplitConfig] = useState({\r\n    method: 'time_based',\r\n    time_points: [],\r\n    interval_duration: 300, // 5 minutes\r\n    preserve_quality: true,\r\n    output_format: 'mp4',\r\n    subtitle_sync_offset: 0,\r\n    force_keyframes: true,\r\n    keyframe_interval: 2.0\r\n  });\r\n  const [processing, setProcessing] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const [splits, setSplits] = useState([]);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [manualTimeInput, setManualTimeInput] = useState('');\r\n  const [isAWSMode, setIsAWSMode] = useState(false);\r\n  \r\n  const videoRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n\r\n  // Detect if we're running in AWS mode\r\n  useEffect(() => {\r\n    const awsMode = process.env.REACT_APP_API_GATEWAY_URL || process.env.REACT_APP_S3_BUCKET;\r\n    setIsAWSMode(!!awsMode);\r\n    \r\n    if (awsMode) {\r\n      console.log('ðŸš€ Running in AWS Amplify mode');\r\n      console.log('API Gateway:', process.env.REACT_APP_API_GATEWAY_URL);\r\n      console.log('S3 Bucket:', process.env.REACT_APP_S3_BUCKET);\r\n    } else {\r\n      console.log('ðŸ–¥ï¸ Running in local development mode');\r\n    }\r\n  }, []);\r\n\r\n  // Clear any stale state on component mount\r\n  useEffect(() => {\r\n    setJobId(null);\r\n    setVideoInfo(null);\r\n    setSplits([]);\r\n    setProgress(0);\r\n    setSelectedFile(null);\r\n  }, []);\r\n\r\n  // Set video source when jobId changes\r\n  useEffect(() => {\r\n    if (jobId && !jobId.includes('mock')) {\r\n      const setVideoSource = () => {\r\n        if (videoRef.current) {\r\n          const timestamp = Date.now();\r\n          const videoUrl = `${API}/video-stream/${jobId}?t=${timestamp}`;\r\n          console.log('Setting video src to:', videoUrl);\r\n          videoRef.current.src = videoUrl;\r\n          videoRef.current.load();\r\n        } else {\r\n          setTimeout(setVideoSource, 100);\r\n        }\r\n      };\r\n      \r\n      setVideoSource();\r\n    }\r\n  }, [jobId, API]);\r\n\r\n  // Show loading screen while checking authentication\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center\">\r\n        <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-8 text-center border border-white/20\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4\"></div>\r\n          <p className=\"text-white text-lg\">Loading Video Splitter Pro...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show login if not authenticated\r\n  if (!isAuthenticated) {\r\n    return <Login />;\r\n  }\r\n\r\n  // Main authenticated app content\r\n  return <AuthenticatedApp \r\n    BACKEND_URL={BACKEND_URL}\r\n    API={API}\r\n    isAWSMode={isAWSMode}\r\n    getAuthHeader={getAuthHeader}\r\n  />;\r\n}\r\n\r\n// Separate component for authenticated app to avoid hooks issues\r\nfunction AuthenticatedApp({ BACKEND_URL, API, isAWSMode, getAuthHeader }) {\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [jobId, setJobId] = useState(null);\r\n  const [videoInfo, setVideoInfo] = useState(null);\r\n  const [splitConfig, setSplitConfig] = useState({\r\n    method: 'time_based',\r\n    time_points: [],\r\n    interval_duration: 300, // 5 minutes\r\n    preserve_quality: true,\r\n    output_format: 'mp4',\r\n    subtitle_sync_offset: 0,\r\n    force_keyframes: true,\r\n    keyframe_interval: 2.0\r\n  });\r\n  const [processing, setProcessing] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const [splits, setSplits] = useState([]);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [manualTimeInput, setManualTimeInput] = useState('');\r\n  \r\n  const videoRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n\r\n  // Clear any stale state on component mount\r\n  useEffect(() => {\r\n    setJobId(null);\r\n    setVideoInfo(null);\r\n    setSplits([]);\r\n    setProgress(0);\r\n    setSelectedFile(null);\r\n  }, []);\r\n\r\n  // Set video source when jobId changes\r\n  useEffect(() => {\r\n    if (jobId && !jobId.includes('mock')) {\r\n      const setVideoSource = () => {\r\n        if (videoRef.current) {\r\n          const timestamp = Date.now();\r\n          const videoUrl = `${API}/video-stream/${jobId}?t=${timestamp}`;\r\n          console.log('Setting video src to:', videoUrl);\r\n          videoRef.current.src = videoUrl;\r\n          videoRef.current.load();\r\n        } else {\r\n          setTimeout(setVideoSource, 100);\r\n        }\r\n      };\r\n      \r\n      setVideoSource();\r\n    }\r\n  }, [jobId, API]);\r\n\r\n  // Format file size for display\r\n  const formatFileSize = (bytes) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\r\n  };\r\n\r\n  // Format time for display\r\n  const formatTime = (seconds) => {\r\n    const hrs = Math.floor(seconds / 3600);\r\n    const mins = Math.floor((seconds % 3600) / 60);\r\n    const secs = Math.floor(seconds % 60);\r\n    if (hrs > 0) {\r\n      return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n    }\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  // Parse time input (MM:SS or HH:MM:SS)\r\n  const parseTime = (timeStr) => {\r\n    const parts = timeStr.split(':').map(p => parseInt(p));\r\n    if (parts.length === 2) {\r\n      return parts[0] * 60 + parts[1];\r\n    } else if (parts.length === 3) {\r\n      return parts[0] * 3600 + parts[1] * 60 + parts[2];\r\n    }\r\n    return 0;\r\n  };\r\n\r\n  // Handle file selection\r\n  const handleFileSelect = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      setSelectedFile(file);\r\n      setJobId(null);\r\n      setVideoInfo(null);\r\n      setSplits([]);\r\n      setProgress(0);\r\n      setSplitConfig({...splitConfig, time_points: []});\r\n      \r\n      if (videoRef.current) {\r\n        videoRef.current.src = '';\r\n        videoRef.current.load();\r\n      }\r\n    }\r\n  };\r\n\r\n  // Upload video (AWS mode vs Local mode) - Now with authentication\r\n  const uploadVideo = async () => {\r\n    if (!selectedFile) return;\r\n\r\n    try {\r\n      setUploadProgress(0);\r\n      \r\n      if (isAWSMode) {\r\n        // AWS mode: Use presigned URL upload with authentication\r\n        console.log('ðŸš€ Uploading to AWS S3...');\r\n        \r\n        // Get presigned URL from API Gateway with auth headers\r\n        const response = await axios.post(`${API}/upload-video`, {\r\n          filename: selectedFile.name,\r\n          fileType: selectedFile.type,\r\n          fileSize: selectedFile.size\r\n        }, {\r\n          headers: getAuthHeader()\r\n        });\r\n        \r\n        const { upload_url, job_id } = response.data;\r\n        \r\n        // Upload directly to S3 using presigned URL\r\n        await axios.put(upload_url, selectedFile, {\r\n          headers: { 'Content-Type': selectedFile.type },\r\n          onUploadProgress: (progressEvent) => {\r\n            const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n            setUploadProgress(percentCompleted);\r\n          }\r\n        });\r\n        \r\n        setJobId(job_id);\r\n        setVideoInfo({\r\n          duration: 120, // Placeholder - would be extracted by Lambda\r\n          format: 'mp4',\r\n          size: selectedFile.size,\r\n          video_streams: [],\r\n          audio_streams: [],\r\n          subtitle_streams: [],\r\n          chapters: []\r\n        });\r\n        \r\n      } else {\r\n        // Local mode: Direct upload to FastAPI with authentication\r\n        const formData = new FormData();\r\n        formData.append('file', selectedFile);\r\n\r\n        const response = await axios.post(`${API}/upload-video`, formData, {\r\n          headers: { \r\n            'Content-Type': 'multipart/form-data',\r\n            ...getAuthHeader()\r\n          },\r\n          onUploadProgress: (progressEvent) => {\r\n            const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n            setUploadProgress(percentCompleted);\r\n          }\r\n        });\r\n\r\n        setJobId(response.data.job_id);\r\n        setVideoInfo(response.data.video_info);\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Upload failed:', error);\r\n      let errorMessage = 'Upload failed';\r\n      \r\n      if (error.response?.status === 401) {\r\n        errorMessage = 'Authentication required. Please log in again.';\r\n      } else if (error.response?.status === 403) {\r\n        errorMessage = 'Access denied. You do not have permission to upload files.';\r\n      } else if (error.response?.data?.detail) {\r\n        errorMessage = error.response.data.detail;\r\n      } else if (error.message) {\r\n        errorMessage = error.message;\r\n      }\r\n      \r\n      alert(errorMessage);\r\n    }\r\n  };\r\n\r\n  // Add split point\r\n  const addSplitPoint = (time = null) => {\r\n    const splitTime = time !== null ? time : currentTime;\r\n    if (splitConfig.method === 'time_based') {\r\n      const newPoints = [...splitConfig.time_points, splitTime].sort((a, b) => a - b);\r\n      setSplitConfig({...splitConfig, time_points: newPoints});\r\n    }\r\n  };\r\n\r\n  // Add manual time point\r\n  const addManualTime = () => {\r\n    if (manualTimeInput) {\r\n      const time = parseTime(manualTimeInput);\r\n      if (time > 0 && videoInfo && time < videoInfo.duration) {\r\n        addSplitPoint(time);\r\n        setManualTimeInput('');\r\n      } else {\r\n        alert('Invalid time format or time exceeds video duration');\r\n      }\r\n    }\r\n  };\r\n\r\n  // Remove split point\r\n  const removeSplitPoint = (index) => {\r\n    const newPoints = splitConfig.time_points.filter((_, i) => i !== index);\r\n    setSplitConfig({...splitConfig, time_points: newPoints});\r\n  };\r\n\r\n  // Start splitting - Now with authentication\r\n  const startSplitting = async () => {\r\n    if (!jobId) return;\r\n\r\n    try {\r\n      setProcessing(true);\r\n      setProgress(0);\r\n      \r\n      await axios.post(`${API}/split-video/${jobId}`, splitConfig, {\r\n        headers: getAuthHeader()\r\n      });\r\n      \r\n      // Poll for progress\r\n      const pollProgress = setInterval(async () => {\r\n        try {\r\n          const response = await axios.get(`${API}/job-status/${jobId}`, {\r\n            headers: getAuthHeader()\r\n          });\r\n          const job = response.data;\r\n          \r\n          setProgress(job.progress);\r\n          \r\n          if (job.status === 'completed') {\r\n            setSplits(job.splits);\r\n            setProcessing(false);\r\n            clearInterval(pollProgress);\r\n          } else if (job.status === 'failed') {\r\n            alert('Processing failed: ' + job.error_message);\r\n            setProcessing(false);\r\n            clearInterval(pollProgress);\r\n          }\r\n        } catch (error) {\r\n          console.error('Progress poll error:', error);\r\n          if (error.response?.status === 401 || error.response?.status === 403) {\r\n            alert('Authentication expired. Please log in again.');\r\n            setProcessing(false);\r\n            clearInterval(pollProgress);\r\n          }\r\n        }\r\n      }, 2000);\r\n      \r\n    } catch (error) {\r\n      console.error('Split failed:', error);\r\n      let errorMessage = 'Split failed';\r\n      \r\n      if (error.response?.status === 401) {\r\n        errorMessage = 'Authentication required. Please log in again.';\r\n      } else if (error.response?.status === 403) {\r\n        errorMessage = 'Access denied. You do not have permission to process videos.';\r\n      } else if (error.response?.data?.detail) {\r\n        errorMessage = error.response.data.detail;\r\n      } else if (error.message) {\r\n        errorMessage = error.message;\r\n      }\r\n      \r\n      alert(errorMessage);\r\n      setProcessing(false);\r\n    }\r\n  };\r\n\r\n  // Download split file - Now with authentication\r\n  const downloadSplit = (filename) => {\r\n    const authHeader = getAuthHeader();\r\n    const downloadUrl = `${API}/download/${jobId}/${filename}`;\r\n    \r\n    // Create a temporary link with auth headers (for newer browsers)\r\n    if (authHeader.Authorization) {\r\n      fetch(downloadUrl, {\r\n        headers: authHeader\r\n      })\r\n      .then(response => response.blob())\r\n      .then(blob => {\r\n        const url = window.URL.createObjectURL(blob);\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = filename;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        window.URL.revokeObjectURL(url);\r\n        document.body.removeChild(link);\r\n      })\r\n      .catch(error => {\r\n        console.error('Download failed:', error);\r\n        alert('Download failed. Please try again or check your authentication.');\r\n      });\r\n    } else {\r\n      // Fallback for direct link (if no auth needed)\r\n      const link = document.createElement('a');\r\n      link.href = downloadUrl;\r\n      link.download = filename;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    }\r\n  };\r\n\r\n  // Update current time from video\r\n  const handleTimeUpdate = () => {\r\n    if (videoRef.current) {\r\n      setCurrentTime(videoRef.current.currentTime);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ProtectedRoute>\r\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900\">\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n          {/* Header with User Info */}\r\n          <Header isAWSMode={isAWSMode} />\r\n\r\n          {/* Upload Section */}\r\n          <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-8 mb-8 border border-white/20\">\r\n            <h2 className=\"text-2xl font-bold text-white mb-6\">Upload Video</h2>\r\n            \r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              accept=\"video/*,.mkv,.mp4,.avi,.mov,.wmv,.flv,.webm\"\r\n              onChange={handleFileSelect}\r\n              className=\"hidden\"\r\n            />\r\n            \r\n            <div className=\"space-y-4\">\r\n              <button\r\n                onClick={() => fileInputRef.current?.click()}\r\n                className=\"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold py-4 px-8 rounded-xl transition-all duration-300 transform hover:scale-105\"\r\n              >\r\n                {selectedFile ? `Selected: ${selectedFile.name}` : 'Choose Video File'}\r\n              </button>\r\n              \r\n              {selectedFile && !jobId && (\r\n                <button\r\n                  onClick={uploadVideo}\r\n                  className=\"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300\"\r\n                >\r\n                  {isAWSMode ? 'Upload to AWS S3' : 'Upload Video'}\r\n                </button>\r\n              )}\r\n              \r\n              {uploadProgress > 0 && uploadProgress < 100 && (\r\n                <div className=\"w-full bg-gray-700 rounded-full h-3\">\r\n                  <div \r\n                    className=\"bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full transition-all duration-300\"\r\n                    style={{width: `${uploadProgress}%`}}\r\n                  ></div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Video Preview */}\r\n          {(videoInfo || jobId) && (\r\n            <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-8 mb-8 border border-white/20\">\r\n              <h2 className=\"text-2xl font-bold text-white mb-6\">Video Preview</h2>\r\n              \r\n              <div className=\"grid lg:grid-cols-2 gap-8\">\r\n                <div>\r\n                  <video\r\n                    ref={videoRef}\r\n                    controls\r\n                    onTimeUpdate={handleTimeUpdate}\r\n                    className=\"w-full rounded-xl shadow-2xl\"\r\n                    preload=\"metadata\"\r\n                    crossOrigin=\"anonymous\"\r\n                  >\r\n                    Your browser does not support the video tag.\r\n                  </video>\r\n                  \r\n                  <div className=\"mt-4 text-white\">\r\n                    <p><strong>Current Time:</strong> {formatTime(currentTime)}</p>\r\n                  </div>\r\n                </div>\r\n                \r\n                {videoInfo && (\r\n                  <div className=\"text-white space-y-4\">\r\n                    <h3 className=\"text-xl font-bold\">Video Information</h3>\r\n                    <div className=\"bg-black/30 rounded-lg p-4 space-y-2\">\r\n                      <p><strong>Duration:</strong> {formatTime(videoInfo.duration)}</p>\r\n                      <p><strong>Format:</strong> {videoInfo.format}</p>\r\n                      <p><strong>Size:</strong> {formatFileSize(videoInfo.size)}</p>\r\n                      <p><strong>Video Streams:</strong> {videoInfo.video_streams.length}</p>\r\n                      <p><strong>Audio Streams:</strong> {videoInfo.audio_streams.length}</p>\r\n                      <p><strong>Subtitle Streams:</strong> {videoInfo.subtitle_streams.length}</p>\r\n                      {videoInfo.chapters.length > 0 && (\r\n                        <p><strong>Chapters:</strong> {videoInfo.chapters.length}</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Split Configuration */}\r\n          {videoInfo && (\r\n            <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-8 mb-8 border border-white/20\">\r\n              <h2 className=\"text-2xl font-bold text-white mb-6\">Split Configuration</h2>\r\n              \r\n              <div className=\"grid lg:grid-cols-2 gap-8\">\r\n                <div className=\"space-y-6\">\r\n                  {/* Split Method */}\r\n                  <div>\r\n                    <label className=\"block text-white font-bold mb-3\">Split Method</label>\r\n                    <select\r\n                      value={splitConfig.method}\r\n                      onChange={(e) => setSplitConfig({...splitConfig, method: e.target.value})}\r\n                      className=\"w-full bg-black/30 text-white rounded-lg p-3 border border-white/20\"\r\n                    >\r\n                      <option value=\"time_based\">Time-based (Manual Points)</option>\r\n                      <option value=\"intervals\">Equal Intervals</option>\r\n                      <option value=\"chapters\">Chapter-based</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  {/* Time-based Configuration */}\r\n                  {splitConfig.method === 'time_based' && (\r\n                    <div className=\"space-y-4\">\r\n                      <div className=\"flex gap-2\">\r\n                        <button\r\n                          onClick={() => addSplitPoint()}\r\n                          className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors\"\r\n                        >\r\n                          Add Current Time ({formatTime(currentTime)})\r\n                        </button>\r\n                      </div>\r\n                      \r\n                      <div className=\"flex gap-2\">\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"MM:SS or HH:MM:SS\"\r\n                          value={manualTimeInput}\r\n                          onChange={(e) => setManualTimeInput(e.target.value)}\r\n                          className=\"flex-1 bg-black/30 text-white rounded-lg p-2 border border-white/20\"\r\n                        />\r\n                        <button\r\n                          onClick={addManualTime}\r\n                          className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors\"\r\n                        >\r\n                          Add\r\n                        </button>\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <h4 className=\"text-white font-bold mb-2\">Split Points:</h4>\r\n                        <div className=\"space-y-2 max-h-32 overflow-y-auto\">\r\n                          {splitConfig.time_points.map((time, index) => (\r\n                            <div key={index} className=\"flex justify-between items-center bg-black/30 rounded p-2\">\r\n                              <span className=\"text-white\">{formatTime(time)}</span>\r\n                              <button\r\n                                onClick={() => removeSplitPoint(index)}\r\n                                className=\"text-red-400 hover:text-red-300\"\r\n                              >\r\n                                Remove\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Interval Configuration */}\r\n                  {splitConfig.method === 'intervals' && (\r\n                    <div>\r\n                      <label className=\"block text-white font-bold mb-2\">Interval Duration (seconds)</label>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={splitConfig.interval_duration}\r\n                        onChange={(e) => setSplitConfig({...splitConfig, interval_duration: parseFloat(e.target.value)})}\r\n                        className=\"w-full bg-black/30 text-white rounded-lg p-3 border border-white/20\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Start Processing */}\r\n                  <button\r\n                    onClick={startSplitting}\r\n                    disabled={processing || (splitConfig.method === 'time_based' && splitConfig.time_points.length === 0)}\r\n                    className=\"w-full bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 disabled:from-gray-600 disabled:to-gray-700 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 disabled:cursor-not-allowed\"\r\n                  >\r\n                    {processing ? 'Processing...' : 'Start Splitting'}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Processing Progress */}\r\n          {processing && (\r\n            <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-8 mb-8 border border-white/20\">\r\n              <h2 className=\"text-2xl font-bold text-white mb-6\">Processing Progress</h2>\r\n              <div className=\"w-full bg-gray-700 rounded-full h-4 mb-4\">\r\n                <div \r\n                  className=\"bg-gradient-to-r from-orange-500 to-red-500 h-4 rounded-full transition-all duration-300\"\r\n                  style={{width: `${progress}%`}}\r\n                ></div>\r\n              </div>\r\n              <p className=\"text-white text-center\">{progress.toFixed(1)}% Complete</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Results */}\r\n          {splits.length > 0 && (\r\n            <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-8 border border-white/20\">\r\n              <h2 className=\"text-2xl font-bold text-white mb-6\">Split Results</h2>\r\n              <div className=\"grid gap-4\">\r\n                {splits.map((split, index) => (\r\n                  <div key={index} className=\"flex justify-between items-center bg-black/30 rounded-lg p-4\">\r\n                    <span className=\"text-white font-medium\">Part {index + 1}: {split.file}</span>\r\n                    <button\r\n                      onClick={() => downloadSplit(split.file)}\r\n                      className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors\"\r\n                    >\r\n                      Download\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </ProtectedRoute>\r\n  );\r\n}\r\n\r\n// Main App with AuthProvider\r\nfunction App() {\r\n  return (\r\n    <AuthProvider>\r\n      <AppContent />\r\n    </AuthProvider>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}